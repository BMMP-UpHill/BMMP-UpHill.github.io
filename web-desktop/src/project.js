require=function e(t,i,a){function s(o,c){if(!i[o]){if(!t[o]){var l="function"==typeof require&&require;if(!c&&l)return l(o,!0);if(n)return n(o,!0);var r=new Error("Cannot find module '"+o+"'");throw r.code="MODULE_NOT_FOUND",r}var p=i[o]={exports:{}};t[o][0].call(p.exports,function(e){var i=t[o][1][e];return s(i?i:e)},p,p.exports,e,t,i,a)}return i[o].exports}for(var n="function"==typeof require&&require,o=0;o<a.length;o++)s(a[o]);return s}({Block:[function(e,t,i){"use strict";cc._RFpush(t,"0cf80va4iJCXZDXbSwgY1mm","Block");var a=e("Types").BlockType;e("States").PlayerMovementState;cc.Class({"extends":cc.Component,properties:{isBlocked:!1,hasItem:!1,blocktype:{"default":a.None,type:a},item:{"default":null,type:cc.Node}},onLoad:function(){},onStepCallback:function(e){switch(this.blocktype){case a.Empty:e.fall()}this.node.runAction(this.assembleBlockAction())},assembleBlockAction:function(){switch(this.blocktype){case a.Empty:return cc.moveTo(0,this.node.getPosition());case a.Trapdor:return cc.moveTo(1,cc.p(this.node.getPositionX(),this.node.getPositionY()-100))}},deform:function(){},destroy:function(){this.node.destroy()},setBlocked:function(e){this.isBlocked=e},isBlocked:function(){return this.isBlocked}}),cc._RFpop()},{States:"States",Types:"Types"}],CloudAnimation:[function(e,t,i){"use strict";cc._RFpush(t,"7288fjsiXFAlL+LiGenQ8Or","CloudAnimation"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){}}),cc._RFpop()},{}],Dirt:[function(e,t,i){"use strict";cc._RFpush(t,"fe13c6ji91IGKAaD1cGpfSK","Dirt");var a=e("Types").BlockType;e("States").PlayerMovementState;cc.Class({"extends":cc.Component,properties:{isBlocked:!1,hasItem:!1,blocktype:{"default":a.None,type:a},item:{"default":null,type:cc.Node}},onLoad:function(){this.playerOnTop=!1},onStepCallback:function(e,t){cc.log("M: onStepCallback Dirt")},collide:function(){}}),cc._RFpop()},{States:"States",Types:"Types"}],Empty:[function(e,t,i){"use strict";cc._RFpush(t,"beeafQj1LhHkLDEkhzDV3+0","Empty");var a=e("Types").BlockType;e("States").PlayerMovementState;cc.Class({"extends":cc.Component,properties:{isBlocked:!1,hasItem:!1,blocktype:{"default":a.None,type:a},item:{"default":null,type:cc.Node}},onLoad:function(){this.playerOnTop=!1},onStepCallback:function(e,t){e.fall()},collide:function(){cc.log("wir sind in der Methode")}}),cc._RFpop()},{States:"States",Types:"Types"}],GameButtonCallbacks:[function(e,t,i){"use strict";cc._RFpush(t,"69e769081xGNbDZBmrDRLFu","GameButtonCallbacks");var a=e("States").GameState;cc.Class({"extends":cc.Component,properties:{pauseOverlay:{"default":null,type:cc.Node},scoreLabel:{"default":null,type:cc.Label},buttonAudio:{"default":null,url:cc.AudioClip},game:{"default":null,type:cc.Node}},onLoad:function(){this.score=cc.sys.localStorage.getItem("score"),console.log("Score in GameButtonCallback: ",this.score),null!==this.scoreLabel&&(console.log("SCORELABEL"),console.log(this.scoreLabel),this.scoreLabel.string="Score: "+this.score.toString()),this.paused=!1},pauseControlCallback:function(){this.paused?(this.pauseOverlay.opacity=0,cc.director.resume(),this.paused=!1,this.game.state=a.Playing,cc.log("resume")):(this.pauseOverlay.opacity=255,cc.director.pause(),this.paused=!0,this.game.state=a.Paused,cc.log("paused")),cc.audioEngine.playEffect(this.buttonAudio,!1)},againControlCallback:function(){cc.director.loadScene("GameScene"),cc.audioEngine.playEffect(this.buttonAudio,!1)},backControlCallback:function(){this.game.state=a.Ended,cc.director.loadScene("Startmenu"),cc.audioEngine.playEffect(this.buttonAudio,!1)}}),cc._RFpop()},{States:"States"}],GameField:[function(e,t,i){"use strict";cc._RFpush(t,"e001f+mMWNN5YhXykLdMFLZ","GameField");var a=e("Level"),s=e("Types").BlockType,n=e("Types").ItemType,o=e("States").GameState,c=113,l=501,r=83,p=65,d=200,u=-100,h=485,m=[[7,1,2,2,1,7],[7,1,5,1,2,1,7],[7,2,1,1,2,7],[7,2,1,1,1,2,7],[7,2,1,1,2,7],[7,1,2,1,5,1,7],[7,1,2,2,1,7],[7,1,1,2,1,1,7]],f=[[7,1,6,6,6,1,7],[7,1,2,2,1,7],[7,1,3,1,3,1,7],[7,1,2,2,1,7],[7,1,2,1,2,1,7],[7,3,2,2,3,7],[7,7,1,1,1,7,7],[7,1,1,4,4,7],[7,4,1,4,1,4,7],[7,4,1,1,1,7],[7,4,1,1,1,1,7],[7,5,1,5,1,7],[7,1,1,1,1,1,7],[7,1,1,1,1,7],[7,6,1,1,1,1,7],[7,1,1,1,1,7]],y=[[0,8,0,0,8,0],[0,8,0,7,0,8,0],[0,0,7,7,2,0],[0,6,7,7,7,0,0],[0,0,7,7,0,0],[0,7,4,7,0,7,0],[0,7,0,0,7,0],[0,8,8,0,8,8,0]],g=[[0,8,0,0,0,8,0],[0,8,0,0,8,0],[0,8,0,0,0,8,0],[0,8,0,0,8,0],[0,8,0,7,0,8,0],[0,0,0,0,0,0],[0,0,9,7,9,0,0],[0,9,7,0,0,0],[0,0,7,0,7,0,0],[0,0,7,9,9,0],[0,0,7,7,0,7,0],[0,0,7,0,8,0],[0,0,0,0,0,7,0],[0,0,0,7,0,0],[0,0,7,0,0,0,0],[0,0,0,2,0,0]],S=0,v=0,C=null;cc.Class({"extends":cc.Component,properties:{gridSizeX:0,gridSizeY:0,despawnHeight:0,item:{"default":null,type:cc.Node},Empty:{"default":null,type:cc.Prefab},Grass:{"default":null,type:cc.Prefab},Dirt:{"default":null,type:cc.Prefab},Trapdoor:{"default":null,type:cc.Prefab},Switcher:{"default":null,type:cc.Prefab},Poison:{"default":null,type:cc.Prefab},Spike:{"default":null,type:cc.Prefab},WaterC:{"default":null,type:cc.Prefab},game:{"default":null,type:cc.Node},AntidoteL:{"default":null,type:cc.Prefab},AntidoteR:{"default":null,type:cc.Prefab},CoinL:{"default":null,type:cc.Prefab},CoinR:{"default":null,type:cc.Prefab},StarL:{"default":null,type:cc.Prefab},StarR:{"default":null,type:cc.Prefab},BlockedBush:{"default":null,type:cc.Prefab},BlockedStone:{"default":null,type:cc.Prefab},SlowDownBottom:{"default":null,type:cc.Prefab},SlowDownTop:{"default":null,type:cc.Prefab},WaterRight:{"default":null,type:cc.Prefab}},onLoad:function(){this.game.getComponent("Game").gamefield=this,this.player=null,this.count=0,this.gameField=[],this.items=[],this.disTX=r,this.disTY=p,this.resetArrays(),this.initializeField(),this.game.getComponent("Game").onGameFieldLoadCallback()},resetArrays:function(){S=0,v=0,f=[[7,1,6,6,6,1,7],[7,1,2,2,1,7],[7,1,3,1,3,1,7],[7,1,2,2,1,7],[7,1,2,1,2,1,7],[7,3,2,2,3,7],[7,7,1,1,1,7,7],[7,1,1,4,4,7],[7,4,1,4,1,4,7],[7,4,1,1,1,7],[7,4,1,1,1,1,7],[7,5,1,5,1,7],[7,1,1,1,1,1,7],[7,1,1,1,1,7],[7,6,1,1,1,1,7],[7,1,1,1,1,7]],g=[[0,8,0,0,0,8,0],[0,8,0,0,8,0],[0,8,0,0,0,8,0],[0,8,0,0,8,0],[0,8,0,7,0,8,0],[0,0,0,0,0,0],[0,0,9,7,9,0,0],[0,9,7,0,0,0],[0,0,7,0,7,0,0],[0,0,7,9,9,0],[0,0,7,7,0,7,0],[0,0,7,0,8,0],[0,0,0,0,0,7,0],[0,0,0,7,0,0],[0,0,7,0,0,0,0],[0,0,0,2,0,0]]},initializeField:function(){for(var e=0;e<m.length;e++){this.gameField[e]=[];for(var t=0;t<m[e].length;t++)C=m[e].length%2===0?this.spawnCube(c+t*r,l-p*e,m[e][t],y[e][t]):this.spawnCube(c+t*r-r/2,l-p*e,m[e][t],y[e][t]),this.gameField[e][t]=C}},updateField:function(e){for(var t=0;t<this.gameField.length;t++)for(var i=0;i<this.gameField[t].length;i++){var a=this.gameField[t][i].getPositionX(),s=this.gameField[t][i].getPositionY();this.gameField[t][i].setPosition(a,s+e)}return this.updatePlayer(e),this.gameField[this.gameField.length-1][0].getPositionY()<=this.despawnHeight&&(cc.log("WIR SIND ZU WEIT!"),this.destroyLine(this.gameField.length-1),this.rearrangeGameField()),!0},updatePlayer:function(e){var t=this.player.node.getPositionX(),i=this.player.node.getPositionY();this.player.node.setPosition(t,i+e)},updatePlayerArrayPos:function(){this.gameField[this.player.arrayPosY].length%2==0?this.player.dir<0&&(this.player.arrayPosX=this.player.arrayPosX+1):this.player.dir>0&&(this.player.arrayPosX=this.player.arrayPosX-1),this.player.arrayPosY=this.player.arrayPosY-1},getStartPosition:function(){var e=Math.round(Number(this.gameField[this.gameField.length-1].length/2))-1,t=this.gameField[this.gameField.length-1][e];this.player.arrayPosX=e,this.player.arrayPosY=this.gameField.length-1,this.player.oldDest=t;var i=cc.p(t.getPositionX(),t.getPositionY()+this.player.offsetY);return i},getJumpField:function(e){return this.gameField[this.player.arrayPosY].length%2==0?e>0?this.gameField[this.player.arrayPosY-1][this.player.arrayPosX]:this.gameField[this.player.arrayPosY-1][this.player.arrayPosX+1]:e>0?this.gameField[this.player.arrayPosY-1][this.player.arrayPosX-1]:this.gameField[this.player.arrayPosY-1][this.player.arrayPosX]},destroyLine:function(e){for(var t=0;t<this.gameField[e].length;t++)this.destroyBlock(this.gameField[e][t])},destroyBlock:function(e){var t=cc.moveTo(1,cc.p(e.getPosition().x,u)).easing(cc.easeCubicActionIn()),i=cc.fadeOut(1.5);e.runAction(cc.sequence(cc.spawn(t,i),cc.callFunc(this.destroyBlockData,this)))},destroyBlockData:function(e){e.destroy()},rearrangeGameField:function(){var e=[],t=this.gameField[1][0].getPositionX();e[0]=this.createFirstLine(t);for(var i=0;i<this.gameField.length-1;i++)e[i+1]=this.gameField[i];this.gameField=e,this.addZOrderToGameField(),this.player.arrayPosY=this.player.arrayPosY+1,this.player.arrayPosY>=this.gameField.length&&(console.log("M: rearrange kills player"),this.player.fall(),this.game.getComponent("Game").state=o.GameOver)},createFirstLine:function(e){cc.log("M: createFirstLine");for(var t=[],i=this.getNextLineFromPuffer(),a=this.getNextLineFromItemPuffer(),s=0;s<i.length;s++)if(i.length%2==0){t[s]=this.spawnCube(e+s*r,h+p-d,i[s],a[s]),t[s].opacity=0;var n=cc.moveTo(1,cc.p(t[s].getPosition().x,h+p)).easing(cc.easeCubicActionIn()),o=cc.fadeIn(1);t[s].runAction(cc.spawn(o,n))}else{t[s]=this.spawnCube(e+s*r,h+p-d,i[s],a[s]),t[s].opacity=0;var n=cc.moveTo(1,cc.p(t[s].getPosition().x,h+p)).easing(cc.easeCubicActionIn()),o=cc.fadeIn(1);t[s].runAction(cc.spawn(o,n))}return t},spawnCube:function(e,t,i,a){switch(cc.log("M: spawnCube"),i){case 0:var n=cc.instantiate(this.Empty);n.getComponent("Empty").blocktype=s.Empty;break;case 1:var n=cc.instantiate(this.Grass);n.getComponent("Grass").blocktype=s.Grass,n=this.spawnItem(n,a,"Grass");break;case 2:var n=cc.instantiate(this.Dirt);n.getComponent("Dirt").blocktype=s.Dirt,n=this.spawnItem(n,a,"Dirt");break;case 3:var n=cc.instantiate(this.Trapdoor);n.getComponent("Trapdoor").blocktype=s.Trapdoor,n.getComponent("Trapdoor").sprite=n;break;case 4:var n=cc.instantiate(this.Switcher);n.getComponent("Switcher").blocktype=s.Switcher,n=this.spawnItem(n,a,"Switcher");break;case 5:var n=cc.instantiate(this.Poison);n.getComponent("Poison").blocktype=s.Poison,n=this.spawnItem(n,a,"Poison");break;case 6:var n=cc.instantiate(this.Spike);n.getComponent("Spike").blocktype=s.Spike,n=this.spawnItem(n,a,"Spike");break;case 7:var n=cc.instantiate(this.WaterC);n.getComponent("Empty").blocktype=s.Empty,n.name="Empty";break;default:var n=cc.instantiate(this.Grass);n.getComponent("Grass").blocktype=s.Grass,n=this.spawnItem(n,a,"Grass")}return n.setPosition(e,t),this.node.addChild(n),n},spawnItem:function(e,t,i){switch(t){case 0:var a=cc.instantiate(this.Empty);a.name="Empty";break;case 1:var a=cc.instantiate(this.AntidoteL);a.name="AntidoteL",a.getComponent("Item").itemtype=n.Antidote;break;case 2:var a=cc.instantiate(this.AntidoteR);a.name="AntidoteR",a.getComponent("Item").itemtype=n.Antidote;break;case 3:var a=cc.instantiate(this.CoinL);a.name="CoinL",a.getComponent("Item").itemtype=n.Coin;break;case 4:var a=cc.instantiate(this.CoinR);a.name="CoinR",a.getComponent("Item").itemtype=n.Coin;break;case 5:var a=cc.instantiate(this.StarL);a.name="starLeft",a.getComponent("Item").itemtype=n.Star;break;case 6:var a=cc.instantiate(this.StarR);a.name="starRight",a.getComponent("Item").itemtype=n.Star;break;case 7:var a=cc.instantiate(this.BlockedBush);a.name="BlockedBush",e.getComponent(i).isBlocked=!0,a.getComponent("Item").itemtype=n.Blocker;break;case 8:var a=cc.instantiate(this.BlockedStone);a.name="BlockedStone",e.getComponent(i).isBlocked=!0,a.getComponent("Item").itemtype=n.Blocker;break;case 9:var a=cc.instantiate(this.SlowDownBottom);a.getComponent("Item").itemtype=n.Slower,a.name="SlowDownBottom";var s=cc.instantiate(this.SlowDownTop);s.getComponent("Item").itemtype=n.Slower,a.addChild(s);break;default:var a=cc.instantiate(this.Empty);a.name="Empty"}var o=[1,2,3,4,5,6],c=[7,8,9,10];if(o.includes(t)){var l=a.getPositionY(),r=a.getPositionX();a.setPosition(r,l+50)}else if(c.includes(t)){var l=a.getPositionY(),r=a.getPositionX();a.setPosition(r,l+40)}return e.getComponent(i).item=a,e.addChild(a),e},getNextLineFromPuffer:function(){cc.log("M: getNextLineFromPuffer");var e=[];return f.length===S?(cc.log("Puffer array is empty!"),this.defineNextRandomArray(),e=f[S],S+=1):(e=f[S],S+=1),e},testArray:function(){f=[],g=[],f=a.L33C,g=a.L33I,S=0,v=0},getNextLineFromItemPuffer:function(){cc.log("M: getNextLineFromItemPuffer");var e=[];return g.length===v?(cc.log("ItemPuffer array is empty!"),e=g[v],v+=1):(e=g[v],v+=1),e},defineNextRandomArray:function(){var e=this.game.getComponent("Game").score;console.log("M: defineNextRandomArray"),console.log("Score ausgelesen: ",e),f=[],g=[];var t=10*Math.random()+1;console.log("Random: ",t),e<=35?t<4?(console.log("WIR WEISE L11C zu"),f=a.L11C,g=a.L11I):t<7?(console.log("WIR WEISE L12C zu"),f=a.L12C,g=a.L12I):(console.log("WIR WEISE L13C zu"),f=a.L13C,g=a.L13I):e<=70?t<4?(console.log("WIR WEISE L21C zu"),f=a.L21C,g=a.L21I):t<7?(console.log("WIR WEISE L22C zu"),f=a.L22C,g=a.L22I):(console.log("WIR WEISE L23C zu"),f=a.L23C,g=a.L23I):t<4?(console.log("WIR WEISE L31C zu"),f=a.L31C,g=a.L31I):t<7?(console.log("WIR WEISE L32C zu"),f=a.L32C,g=a.L32I):(console.log("WIR WEISE L33C zu"),f=a.L33C,g=a.L33I),S=0,v=0},addZOrderToGameField:function(){cc.log("M: addZOrderToGameField");for(var e=1,t=0;t<this.gameField.length;t++)for(var i=0;i<this.gameField[t].length;i++)this.gameField[t][i].setLocalZOrder(e),e++},getBlockType:function(e){return cc.log("M: getBlockType"),cc.log(e.name),e.name},callPrefab:function(e){this.pref.node.collide()}}),cc._RFpop()},{Level:"Level",States:"States",Types:"Types"}],Game:[function(e,t,i){"use strict";cc._RFpush(t,"076ef+CbqVCFK/Q9scrL8Ui","Game");var a=e("States").GameState,s=e("States").PlayerMovementState,n=e("Types").BlockType,o=(n.None,!0),c=cc.Texture2D.prototype.handleLoadedTexture;cc.Texture2D.prototype.handleLoadedTexture=function(){c.apply(this,arguments),this.setAliasTexParameters()};var l=0;cc.Class({"extends":cc.Component,properties:{state:{"default":a.None,type:a},gamefield:{"default":null,type:cc.Node},player:{"default":null,type:cc.Node},scoreLabel:{"default":null,type:cc.Label},multiplierLabel:{"default":null,type:cc.Label},themeurl:{"default":null,url:cc.AudioClip}},onLoad:function(){this.storage=cc.sys.localStorage,this.state=a.Waiting,this.initalizeInputControl(),cc.audioEngine.playMusic(this.themeurl,!0),this.storage.setItem("score",0),this.score=0,this.scoreMultiplier=1,this.multiplierActive=!1,this.steppedBlock=null},reset:function(){},onPlayerLoadCallback:function(){this.gamefield.player=this.player,this.player.node.setPosition(this.gamefield.getStartPosition()),this.player.node.setLocalZOrder(1e3),this.player.dx=this.gamefield.disTX/2,this.player.dy=this.gamefield.disTY},onGameFieldLoadCallback:function(){},validateMove:function(e){if(this.state===a.GameOver)return!1;if(this.player.movestate===s.Jumping||this.player.movestate===s.Falling)return!1;if(this.player.isSwaped&&(e=-e),this.player.isSlowed){if(console.log("PRESSCOUNT"+l),l++,l<3)return console.log("STILL SLOWED"),!1;console.log("RELEASE"+l),l=0,this.player.isSlowed=!1}this.destfield=this.gamefield.getJumpField(e);var t=this.destfield.getComponent(this.destfield.name);return!t.isBlocked&&(this.player.isSwaped=!1,this.player.dir=e,this.incrementScore(1),this.scoreLabel.string=this.score.toString(),!0)},initalizeInputControl:function(){var e=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(t,i){if(e.state!=a.Paused)switch(t){case cc.KEY.a:e.state===a.Waiting&&(e.state=a.Playing),e.validateMove(1)&&(e.player.move(e.destfield,e),e.gamefield.updatePlayerArrayPos(),void 0!==e.player.oldDest&&(e.player.oldDest.getComponent(e.player.oldDest.name).playerOnTop=!1));break;case cc.KEY.d:e.state===a.Waiting&&(e.state=a.Playing),e.validateMove(-1)&&(e.player.move(e.destfield,e),e.gamefield.updatePlayerArrayPos(),void 0!==e.player.oldDest&&(e.player.oldDest.getComponent(e.player.oldDest.name).playerOnTop=!1));break;case cc.KEY.u:e.gamefield.updateField(-10);break;case cc.KEY.k:e.player.kill();break;case cc.KEY.escape:cc.log("Escape pressed");break;case cc.KEY.f:e.player.fall()}},onKeyReleased:function(e,t){switch(e){case cc.KEY.a:break;case cc.KEY.d:}}},e.node)},update:function(e){this.state===a.Playing&&this.moveFieldWithPlayer(),this.state===a.GameOver&&(this.storage.setItem("score",this.score),cc.director.loadScene("GameOverScene"))},moveFieldWithPlayer:function(){var e=this.player.arrayPosY;if(o)switch(o=!1,e){case 8:o=this.gamefield.updateField(-.3);break;case 7:o=this.gamefield.updateField(-.4);break;case 6:o=this.gamefield.updateField(-1);break;case 5:o=this.gamefield.updateField(-1.5);break;case 4:o=this.gamefield.updateField(-2);break;case 3:o=this.gamefield.updateField(-4);break;case 2:o=this.gamefield.updateField(-8);break;case 1:o=this.gamefield.updateField(-12);break;case 0:o=this.gamefield.updateField(-20);break;default:o=this.gamefield.updateField(-.3)}},changeMultiplier:function(e){this.scoreMultiplier=e,this.multiplierLabel.string="Multiplier: "+this.scoreMultiplier,this.multiplierLabel.node.opacity=255;var t=cc.callFunc(this.resetMultiplier,this);this.multiplierLabel.node.runAction(cc.sequence(cc.fadeOut(5),t))},resetMultiplier:function(){this.scoreMultiplier=0},incrementScore:function(e){this.score+=e*this.scoreMultiplier},checkItemCollision:function(e){var t=e.node.getPosition(),i=this.player.node.getPosition(),a=cc.pDistance(t,i);a<e.collectRadius&&e.onPickUpCallback(this.player)}}),cc._RFpop()},{States:"States",Types:"Types"}],Grass:[function(e,t,i){"use strict";cc._RFpush(t,"65b91llmkxJtJkhqsYzFp71","Grass");var a=e("Types").BlockType;e("States").PlayerMovementState;cc.Class({"extends":cc.Component,properties:{isBlocked:!1,hasItem:!1,blocktype:{"default":a.None,type:a},item:{"default":null,type:cc.Node}},onLoad:function(){this.playerOnTop=!1},onStepCallback:function(e,t){cc.log("M: onStepCallback Grass")},collide:function(){}}),cc._RFpop()},{States:"States",Types:"Types"}],Item:[function(e,t,i){"use strict";cc._RFpush(t,"a9d5fhMpDRB7rnwgzl0Y19Z","Item");var a=e("Types").ItemType,s=e("States").ItemState,n=e("States").ItemActivityState,o=50;cc.Class({"extends":cc.Component,properties:{itemtype:{"default":a.None,type:a},itemstate:{"default":s.Pickable,type:s},activitystate:{"default":n.Idle,type:n},collectRadius:0,itemValue:0,itemTimer:0,activationsound:{"default":null,url:cc.AudioClip}},onLoad:function(){},destroyItem:function(){switch(console.log("Itemtype to destroy: "+this.itemtype.toString()),console.log(a[this.itemtype]),this.itemtype){case a.Slower:break;case a.Antidote:case a.Coin:case a.Star:this.node.destroy()}},onPickUpCallback:function(e,t){switch(this.itemstate=s.Picked,this.activitystate=n.Active,this.itemtype){case a.Antidote:e.isPoisoned=!1,e.poisonTmp=e.poisonTimer;break;case a.Coin:console.log("GAME: ",t.name),t.incrementScore(5),t.scoreLabel.string=t.score.toString();break;case a.Star:e.isPoisoned=!1,e.isInvincible=!0;break;case a.Slower:console.log("SET SWAPED TRUE"),e.isSlowed=!0}var i=cc.callFunc(this.picked,this),o=cc.callFunc(this.playSound,this);this.node.runAction(cc.sequence(cc.spawn(this.assemblePickUpAction(),o),i))},assemblePickUpAction:function(){this.activitystate=n.Active;var e=cc.p(this.node.getPositionX(),this.node.getPositionY()+o),t=cc.fadeOut(this.getItemAnimationTime()),i=null;switch(this.itemtype){case a.Star:case a.Coin:case a.Antidote:i=cc.moveBy(this.getItemAnimationTime(),e)}return cc.spawn(t,i)},getItemAnimationTime:function(e){switch(this.itemtype){case a.Antidote:case a.Coin:case a.Star:return 1.5}},picked:function(){this.activitystate=n.Expired,this.destroyItem()},playSound:function(){null!==this.activationsound&&cc.audioEngine.playEffect(this.activationsound,!1)}}),cc._RFpop()},{States:"States",Types:"Types"}],Level:[function(e,t,i){"use strict";cc._RFpush(t,"7c45etIGUtBC5VbkAJJ2UCT","Level");var a=[[7,1,1,6,1,1,7],[7,1,1,1,1,7],[7,7,1,6,1,7,7],[7,1,1,1,1,7],[7,7,1,6,1,7,7],[7,1,1,1,1,7],[7,1,1,6,1,1,7],[7,6,1,1,6,7]],s=[[0,8,0,0,0,8,0],[0,8,0,0,8,0],[0,0,8,0,8,0,0],[0,8,0,0,8,0],[0,0,8,0,8,0,0],[0,8,0,0,8,0],[0,8,0,0,0,8,0],[0,0,0,0,0,0]],n=[[7,1,1,1,1,1,7],[7,1,1,1,1,7],[7,1,1,1,1,1,7],[7,1,1,1,1,7],[7,1,1,1,1,4,7],[7,1,1,1,1,7],[7,1,1,3,1,1,7],[7,1,1,1,1,7]],o=[[0,4,7,0,0,0,0],[0,4,7,0,0,0],[0,4,4,7,0,0,0],[0,4,4,7,9,0],[0,4,4,4,7,0,0],[0,0,0,0,6,0],[0,0,7,0,7,0,0],[0,0,0,0,0,0]],c=[[7,1,5,1,1,1,7],[7,6,1,1,1,7],[7,1,7,1,1,1,7],[7,1,7,1,1,7],[7,1,1,7,1,1,7],[7,1,1,7,6,7],[7,1,1,7,1,1,7],[7,1,7,1,1,7]],l=[[0,0,0,0,0,0,0],[0,0,4,7,0,0],[0,9,0,4,0,7,0],[0,9,0,4,0,0],[0,0,0,0,4,0,0],[0,0,1,0,0,0],[0,0,0,0,0,0,0],[0,0,0,2,0,0]],r=[[7,2,2,2,2,2,7],[7,2,2,2,2,7],[7,2,2,2,2,2,7],[7,2,2,2,2,7],[7,7,2,2,2,7,7],[7,6,6,6,6,7],[7,2,2,2,2,2,7],[7,2,2,2,2,7]],p=[[0,7,0,7,4,7,0],[0,7,3,0,7,0],[0,7,0,7,3,7,0],[0,9,7,7,9,0],[0,0,9,4,9,0,0],[0,0,0,0,0,0],[0,9,7,6,7,9,0],[0,9,9,9,9,0]],d=[[7,4,4,7,4,4,7],[7,4,7,7,2,7],[7,7,2,7,4,7,7],[7,4,7,7,4,7],[7,7,4,7,2,7,7],[7,4,7,7,4,7],[7,7,2,7,4,7,7],[7,4,7,7,4,7]],u=[[0,0,0,0,0,0,0],[0,0,0,0,4,0],[0,0,4,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,4,0,0],[0,0,0,0,0,0],[0,0,4,0,0,0,0],[0,0,0,0,0,0]],h=[[7,2,2,2,2,2,7],[7,5,5,5,5,7],[7,3,2,2,2,3,7],[7,3,2,2,3,7],[7,3,3,2,2,2,7],[7,3,2,3,2,7],[7,3,2,3,3,2,7],[7,2,2,3,2,7]],m=[[0,9,9,6,9,9,0],[0,0,0,0,0,0],[0,0,9,3,9,0,0],[0,0,0,3,0,0],[0,0,0,9,3,0,0],[0,0,2,0,3,0],[0,0,0,0,0,3,0],[0,0,0,0,0,0]],f=[[7,3,5,3,5,3,7],[7,4,3,3,4,7],[7,3,6,3,6,3,7],[7,3,4,4,3,7],[7,3,3,6,3,3,7],[7,3,2,4,3,7],[7,3,4,3,6,3,7],[7,3,2,3,2,7]],y=[[0,4,0,4,0,0,0],[0,0,4,4,0,0],[0,4,0,0,0,0,0],[0,2,0,0,0,0],[0,0,0,0,1,0,0],[0,0,2,0,0,0],[0,0,0,0,0,0,0],[0,4,0,0,3,0]],g=[[7,7,2,7,2,7,7],[7,6,7,7,6,7],[7,7,4,3,4,7,7],[7,5,6,6,5,7],[7,6,7,2,7,6,7],[7,4,7,6,4,7],[7,7,2,7,2,7,7],[7,3,2,7,2,7]],S=[[0,0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,4,0,0,0],[0,0,0,0,0,0],[0,4,9,0,0,0,0],[0,2,1,0,1,0]],v=[[7,1,6,1,6,1,7],[7,1,3,1,3,7],[7,6,1,6,1,6,7],[7,1,4,4,1,7],[7,5,3,6,3,5,7],[7,1,1,1,1,7],[7,1,1,1,1,1,7],[7,1,1,1,1,7]],C=[[0,0,3,0,4,0,0],[0,0,0,0,0,0],[0,0,0,4,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,9,9,9,9,0],[0,9,9,9,9,9,0],[0,0,1,2,0,0]];t.exports={L11C:a,L11I:s,L12C:n,L12I:o,L13C:c,L13I:l,L21C:r,L21I:p,L22C:d,L22I:u,L23C:h,L23I:m,L31C:f,L31I:y,L32C:g,L32I:S,L33C:v,L33I:C},cc._RFpop()},{}],MenuButtonCallbacks:[function(e,t,i){"use strict";cc._RFpush(t,"10915ky+jBFrIsAE/lnyWqN","MenuButtonCallbacks"),cc.Class({"extends":cc.Component,properties:{buttonAudio:{"default":null,url:cc.AudioClip}},onLoad:function(){},startControlCallback:function(){var e=function(){console.log("Scene launched")};cc.director.loadScene("GameScene",e),cc.audioEngine.playEffect(this.buttonAudio,!1)},aboutControlCallback:function(){cc.director.loadScene("About"),cc.audioEngine.playEffect(this.buttonAudio,!1)},tutorialControlCallback:function(){cc.director.loadScene("Tutorial"),cc.audioEngine.playEffect(this.buttonAudio,!1)},quitControlCallback:function(){cc.log("Quit pressed."),cc.audioEngine.playEffect(this.buttonAudio,!1)},backControlCallback:function(){cc.director.loadScene("Startmenu"),cc.audioEngine.playEffect(this.buttonAudio,!1)}}),cc._RFpop()},{}],Player:[function(e,t,i){"use strict";cc._RFpush(t,"dfcfezAAcJAALXPiIHVJj2d","Player");var a=e("States").GameState,s=e("States").PlayerMovementState,n=(e("States").PlayerState,.2),o=25;cc.Class({"extends":cc.Component,properties:{movestate:{"default":s.Standing,type:s},isInvincible:!1,isPoisoned:!1,isAlive:!1,isSwaped:!1,isSlowed:!1,poisonTimer:0,invincibiltyTimer:0,dir:0,arrayPosX:0,arrayPosY:0,jumpTime:0,fallTime:0,playeratlas:{"default":null,type:cc.SpriteAtlas},jumpAudio:{"default":null,url:cc.AudioClip},deathAudio:{"default":null,url:cc.AudioClip},fallAudio:{"default":null,url:cc.AudioClip},drinkAudio:{"default":null,url:cc.AudioClip},poisonedAudio:{"default":null,url:cc.AudioClip},game:{"default":null,type:cc.Node}},onLoad:function(){this.game.getComponent("Game").player=this,this.poisonTmp=this.poisonTimer,this.invincibiltyTmp=this.invincibiltyTimer,this.movestate=s.Standing,this.isMoving=!1,this.isAlive=!0,this.offsetY=this.node.getContentSize().height/2,this.destinationpos=cc.p(0,0),this.game.getComponent("Game").onPlayerLoadCallback()},kill:function(){this.isInvincible=!1,this.isAlive=!1;var e=cc.callFunc(this.changeGameState,this),t=cc.callFunc(this.playSound,this);this.node.runAction(cc.sequence(cc.spawn(this.deform(),this.assembleAction()),e,t)),cc.audioEngine.stopAllEffects()},fall:function(){this.isInvincible=!1,this.movestate=s.Falling;var e=cc.callFunc(this.kill,this),t=cc.callFunc(this.playSound,this);this.node.runAction(cc.sequence(cc.spawn(this.deform(),this.assembleAction()),t,e)),this.isAlive=!1,cc.audioEngine.stopAllEffects()},changeGameState:function(){this.isAlive||(this.game.getComponent("Game").state=a.GameOver)},changeGameFallState:function(){console.log("Alive: "+this.isAlive),this.isAlive&&(this.isAlive=!1),console.log("Change GameState: ",this.game.getComponent("Game").state),this.game.getComponent("Game").state=a.GameOver,console.log(this.game.getComponent("Game").state)},changePlayerState:function(){switch(this.movestate){case s.Jumping:this.movestate=s.Standing}},blockStepped:function(e,t){this.gAme=t;var i=this.destfield.getComponent(this.destfield.name);console.log("STEPPED BLOCK: ",i),console.log(this.destfield.name),i.onStepCallback(this,t);var a=i.getComponentInChildren("Item");null!==a&&a.onPickUpCallback(this,this.gAme)},move:function(e,t){if(this.isAlive!==!1)switch(this.oldDest=this.destfield,this.destfield=e,this.movestate){case s.Standing:this.movestate=s.Jumping;var i=cc.callFunc(this.playSound,this),a=cc.callFunc(this.changePlayerState,this),n=cc.callFunc(this.blockStepped,this,t);this.switchPlayerAppearance(),this.setDestinationPos(),this.node.runAction(cc.sequence(cc.spawn(this.deform(),this.assembleAction()),n,i,a));break;case s.Jumping:case s.Falling:return}},setDestinationPos:function(){this.destinationpos.x=this.destfield.getPositionX(),this.destinationpos.y=this.destfield.getPositionY()+this.offsetY},switchPlayerAppearance:function(){this.updated=this.updateAnimation(),this.updated||(this.dir<0?this.getComponent(cc.Sprite).spriteFrame=this.playeratlas.getSpriteFrame("player_left"):this.getComponent(cc.Sprite).spriteFrame=this.playeratlas.getSpriteFrame("player_right"))},assembleAction:function(){if(this.isAlive===!1)return cc.moveBy(n,cc.p(0,o));switch(this.movestate){case s.Standing:break;case s.Falling:return cc.moveTo(this.fallTime,cc.p(this.node.getPosition().x,0)).easing(cc.easeCubicActionIn());case s.Jumping:var e=[this.node.getPosition(),this.destinationpos,this.destinationpos];return cc.bezierTo(this.jumpTime,e)}},deform:function(){if(this.isAlive===!1)return cc.sequence(cc.scaleTo(n,1.3,1.3),cc.scaleTo(n,0,0));switch(this.movestate){case s.Jumping:var e=.5*this.jumpTime;return cc.sequence(cc.scaleTo(e,1,1.1),cc.scaleTo(e,1,.9),cc.scaleTo(e,1,1));case s.Falling:this.node.setLocalZOrder(this.destfield.getLocalZOrder());var t=cc.scaleTo(this.fallTime,.85,.85),i=cc.fadeOut(4*this.fallTime);return cc.spawn(t,i.easing(cc.easeCubicActionOut()))}return this.isPoisoned?null:this.isInvincible?null:void 0},playSound:function(){if(!this.isAlive)return void cc.audioEngine.playEffect(this.deathAudio,!1);switch(this.isPoisoned&&cc.audioEngine.playEffect(this.poisonedAudio,!1),this.movestate){case s.Jumping:cc.audioEngine.playEffect(this.jumpAudio,!1);break;case s.Falling:cc.audioEngine.playEffect(this.fallAudio,!1)}},update:function(e){this.isAlive&&this.updateTimers(e)},updateAnimation:function(){return this.animation||(this.animation=this.getComponent(cc.Animation)),this.isPoisoned||this.isInvincible?((this.isPoisoned||this.isInvincible)&&this.animation.play(this.getAnimation()),!0):(this.animation.stop(),!1)},updateTimers:function(e){this.isPoisoned&&(this.poisonTmp<=0?(this.isPoisoned=!1,this.isAlive=!1,this.kill()):this.poisonTmp-=e),this.isInvincible&&(this.invincibiltyTmp<=0?(this.isInvincible=!1,this.invincibiltyTmp=this.invincibiltyTimer):this.invincibiltyTmp-=e)},isMoving:function(){switch(this.movestate){case s.Jumping:return this.isMoving=!0,!0;case s.Standing:return!1}},isAlive:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return isAlive}),getAnimation:function(){if(this.dir<0){if(this.isPoisoned)return"poison_left_anim";if(this.isInvincible)return"star_left_anim"}else{if(this.isPoisoned)return"poison_right_anim";if(this.isInvincible)return"star_right_anim"}}}),cc._RFpop()},{States:"States"}],Poison:[function(e,t,i){"use strict";cc._RFpush(t,"e050ffZnUVAjKB8fySd+ZdO","Poison");var a=e("Types").BlockType;e("States").PlayerMovementState;cc.Class({"extends":cc.Component,properties:{isBlocked:!1,hasItem:!1,blocktype:{"default":a.None,type:a},item:{"default":null,type:cc.Node}},onLoad:function(){this.playerOnTop=!1},onStepCallback:function(e,t){cc.log("M: onStepCallback Poison"),console.log("DU WURDEST VERGIFTET"),e.isInvincible||(e.isPoisoned=!0)},collide:function(){}}),cc._RFpop()},{States:"States",Types:"Types"}],Spike:[function(e,t,i){"use strict";cc._RFpush(t,"e22c3Q4gXBNCp5WTGCtGqSz","Spike");var a=!1;cc.Class({"extends":cc.Component,properties:{isDeadly:!0},switchDeadly:function(){this.isDeadly=!this.isDeadly,this.hasKilled=!1},onLoad:function(){this.isDeadly=!0,this.playerOnTop=!1},onStepCallback:function(e,t){this.player=e,this.playerOnTop=!0,console.log("M: Onstep Spike"),console.log("OnS isDeadly: ",this.isDeadly),this.hasKilled||this.performSpikeKill()},performSpikeKill:function(){this.isDeadly||this.player.isInvincible?console.log("Glück gehabt"):(console.log("Uups, das war tötlich"),a||(this.player.kill(),a=!0),this.hasKilled=!0)},update:function(e){this.playerOnTop&&this.performSpikeKill()}}),cc._RFpop()},{}],States:[function(e,t,i){"use strict";cc._RFpush(t,"f8af3m3LglPNY34Ddb9VWD0","States");var a=cc.Enum({None:999,Idle:-1,Loading:-1,Waiting:-1,Playing:-1,GameOver:-1,Paused:-1,Resumed:-1,Ended:-1}),s=cc.Enum({Standing:-1,Jumping:-1,Falling:-1}),n=cc.Enum({Pickable:-1,Blocked:-1,Picked:-1}),o=cc.Enum({Idle:-1,Active:-1,Expired:-1}),c=cc.Enum({Alive:-1,Dead:-1,Poisoned:-1,Invincible:-1});t.exports={GameState:a,PlayerMovementState:s,ItemState:n,PlayerState:c,ItemActivityState:o},cc._RFpop()},{}],Switcher:[function(e,t,i){"use strict";cc._RFpush(t,"4323d4XJ4ZMiZ2wx+yx7E7n","Switcher");var a=e("Types").BlockType;e("States").PlayerMovementState;cc.Class({"extends":cc.Component,properties:{isBlocked:!1,hasItem:!1,blocktype:{"default":a.None,type:a},item:{"default":null,type:cc.Node}},onLoad:function(){this.playerOnTop=!1},onStepCallback:function(e,t){cc.log("M: onStepCallback Switcher"),e.isSwaped=!0},collide:function(){}}),cc._RFpop()},{States:"States",Types:"Types"}],Trapdoor:[function(e,t,i){"use strict";cc._RFpush(t,"1c710YvWvBAcqTBB0WMuN9v","Trapdoor");var a=e("Types").BlockType;e("States").PlayerMovementState;cc.Class({"extends":cc.Component,properties:{isBlocked:!1,hasItem:!1,blocktype:{"default":a.None,type:a},item:{"default":null,type:cc.Node}},onLoad:function(){this.playerOnTop=!1},onStepCallback:function(e,t){var i=this.node.getComponent(cc.Animation);i.play("trapdoor");var a=cc.moveTo(1,cc.p(this.node.getPositionX(),this.node.getPositionY()-100));this.node.runAction(a),e.fall()},collide:function(){},destroy:function(){this.node.destroy()}}),cc._RFpop()},{States:"States",Types:"Types"}],Types:[function(e,t,i){"use strict";cc._RFpush(t,"71b93SRN0BO1qKSq55EU/WI","Types");var a=cc.Enum({None:999,Star:-1,Coin:-1,Antidote:-1,Blocker:-1,Slower:-1}),s=cc.Enum({None:-1,Empty:-1,Dirt:-1,Grass:-1,Poison:-1,Switcher:-1,Trapdoor:-1,Spike:-1});t.exports={ItemType:a,BlockType:s},cc._RFpop()},{}],WaterRight:[function(e,t,i){"use strict";cc._RFpush(t,"96e20B9zFpCUKKVUnxPN/H9","WaterRight"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){this.playerOnTop=!1}}),cc._RFpop()},{}]},{},["Game","Block","MenuButtonCallbacks","Trapdoor","Switcher","Grass","GameButtonCallbacks","Types","CloudAnimation","Level","WaterRight","Item","Empty","Player","GameField","Poison","Spike","States","Dirt"]);